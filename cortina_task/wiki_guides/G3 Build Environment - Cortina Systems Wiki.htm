<!DOCTYPE html>
<html dir="ltr" class="client-js" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><title>G3 Build Environment - Cortina Systems Wiki</title>
<meta name="generator" content="MediaWiki 1.22.6">
<link rel="stylesheet" href="G3%20Build%20Environment%20-%20Cortina%20Systems%20Wiki_files/cortina.css">
<link rel="shortcut icon" href="http://sv-wiki-01/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="http://sv-wiki-01/wiki/opensearch_desc.php" title="Cortina Systems Wiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="http://sv-wiki-01/wiki/api.php?action=rsd">
<link rel="alternate" type="application/atom+xml" title="Cortina Systems Wiki Atom feed" href="http://sv-wiki-01/wiki/index.php?title=Special:RecentChanges&amp;feed=atom">
<link rel="stylesheet" href="G3%20Build%20Environment%20-%20Cortina%20Systems%20Wiki_files/load.css">
<!--[if IE 6]><link rel="stylesheet" href="/wiki/skins/monobook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/wiki/skins/monobook/IE70Fixes.css?303" media="screen" /><![endif]--><style>
.mw-collapsible-toggle{float:right} li .mw-collapsible-toggle{float:none} .mw-collapsible-toggle-li{list-style:none}
/* cache key: wikiSQL:resourceloader:filter:minify-css:7:4250852ed2349a0d4d0fc6509a3e7d4c */
.suggestions{overflow:hidden;position:absolute;top:0;left:0;width:0;border:none;z-index:1099;padding:0;margin:-1px -1px 0 0} html > body .suggestions{margin:-1px 0 0 0}.suggestions-special{position:relative;background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0;margin-top:-2px;display:none;padding:0.25em 0.25em;line-height:1.25em}.suggestions-results{background-color:white;cursor:pointer;border:solid 1px #aaaaaa;padding:0;margin:0}.suggestions-result{color:black;margin:0;line-height:1.5em;padding:0.01em 0.25em;text-align:left}.suggestions-result-current{background-color:#4C59A6;color:white}.suggestions-special .special-label{color:gray;text-align:left}.suggestions-special .special-query{color:black;font-style:italic;text-align:left}.suggestions-special .special-hover{background-color:silver}.suggestions-result-current .special-label,.suggestions-result-current .special-query{color:white}.autoellipsis-matched,.highlight{font-weight:bold}
/* cache key: wikiSQL:resourceloader:filter:minify-css:7:9780324491b653a3780e2d029bdc140c */
.postedit-container{margin:0 auto;position:fixed;top:0;height:0;left:50%;z-index:1000;font-size:13px}.postedit-container:hover{cursor:pointer}.postedit{position:relative;top:0.6em;left:-50%;padding:.6em 3.6em .6em 1.1em;line-height:1.5625em;color:#626465;background-color:#f4f4f4;border:1px solid #dcd9d9;text-shadow:0 0.0625em 0 rgba(255,255,255,0.5);border-radius:5px;-webkit-box-shadow:0 2px 5px 0 #ccc;box-shadow:0 2px 5px 0 #ccc;-webkit-transition:all 0.25s ease-in-out;-moz-transition:all 0.25s ease-in-out;-ms-transition:all 0.25s ease-in-out;-o-transition:all 0.25s ease-in-out;transition:all 0.25s ease-in-out}.skin-monobook .postedit{top:6em !important}.postedit-faded{opacity:0}.postedit-icon{padding-left:41px;  line-height:25px;background-repeat:no-repeat;background-position:8px 50%}.postedit-icon-checkmark{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABblBMVEUAAAD///////9PfTf///80aRdTgjn///9Feij///////////9Rfzf///////////9PfjZRgDh1o1xOfTb///////+bwYqLtnj///////9PfTa82K////9WhT6YxIL///9QgDdTgzr////////j7uDl7eLq8efi693k7OH///////9UhjuBr2rp9uRUhjr///9YljVKgir///9WiTlYjT3////9/v57vFlbkT5PjC9dlD/5/fhuq09stUTs9uhxuElctCpfnT1huDFloEZloUZmpENmvDZpvDxpvTxqvjxrvT5rvT9rwTxsqktswD5uwkBvuUdxw0NztFBztU9ztVBzwkp0tlJ1xkd2t1R3uVR4w1F4xk54x014yE15uVZ5v1R5xVB6v1R7yFJ8wVh9xVl9yFR9yVd9ylN+xVh+yFd/x1l/yFeAylmEx1+Ny2uY0Hqe04Wj1Ymv3Ze33qLD47TJ5L3O6cPU7Mrq9eb2+/Q4j37OAAAAQHRSTlMAAQIEBAUFBQwPFB4fJCUoKiosQEhJS01RUlZZXmdydXaChYuSlJSWmJmoq6uur8LExcvM19fg5ejt8fX2+Pr7SljgewAAAKpJREFUGBkFwQNCAwAAAMDLtl3LtrG4rWXbtvX77gAgZ6grFwC0bhwNVgKgdPZx8b0dgLi+s7Wn0VoAqpfOI9+BNADZI7fLrz2pSEwGHZuH+78lSK8ZLkLezF3ooyUG3VPXq2USei9WngeyoG195yBYWDF3E/2pAhl1e9Gr8bGT+bfOFCC2fnvh4X7rcqIAQNNu+HT6sxkAjceTL/2ZAIhv+PorBwBJxfkA//dFHSCBy/UTAAAAAElFTkSuQmCC);background-image:url(http://sv-wiki-01/wiki/resources/mediawiki.action/images/green-checkmark.png?2014-04-24T21:25:00Z)!ie;background-position:left}.postedit-close{position:absolute;padding:0 .8em;right:0;top:0;font-size:1.25em;font-weight:bold;line-height:2.3em;color:black;text-shadow:0 0.0625em 0 white;text-decoration:none;opacity:0.2;filter:alpha(opacity=20)}.postedit-close:hover{color:black;text-decoration:none;opacity:0.4;filter:alpha(opacity=40)}
/* cache key: wikiSQL:resourceloader:filter:minify-css:7:7f54a550ae14160313958ddb2288bcd7 */</style><style>
.suggestions a.mw-searchSuggest-link,.suggestions a.mw-searchSuggest-link:hover,.suggestions a.mw-searchSuggest-link:active,.suggestions a.mw-searchSuggest-link:focus{text-decoration:none;color:black}.suggestions-result-current a.mw-searchSuggest-link,.suggestions-result-current a.mw-searchSuggest-link:hover,.suggestions-result-current a.mw-searchSuggest-link:active,.suggestions-result-current a.mw-searchSuggest-link:focus{color:white}
/* cache key: wikiSQL:resourceloader:filter:minify-css:7:52b1797f70c7e4094dfa4191101944e8 */</style><meta name="ResourceLoaderDynamicStyles" content="">
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wikiSQL:resourceloader:filter:minify-css:7:2902c472ef4c41bfeaf25eb08706bd57 */</style>

<script src="G3%20Build%20Environment%20-%20Cortina%20Systems%20Wiki_files/load_002.php"></script><script src="G3%20Build%20Environment%20-%20Cortina%20Systems%20Wiki_files/load_004.php"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"G3_Build_Environment","wgTitle":"G3 Build Environment","wgCurRevisionId":102002,"wgRevisionId":102002,"wgArticleId":9179,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"G3_Build_Environment","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRestrictionRead":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0
,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: wikiSQL:resourceloader:filter:minify-js:7:68471340157e99d9e2eb390b7623161a */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><script src="G3%20Build%20Environment%20-%20Cortina%20Systems%20Wiki_files/load_003.php"></script>
<script async="" src="G3%20Build%20Environment%20-%20Cortina%20Systems%20Wiki_files/load.php"></script></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-G3_Build_Environment skin-monobook action-view">
<div id="globalWrapper">
<div id="column-content"><div id="content" class="mw-body-primary" role="main">
	<a id="top"></a>
	<div id="siteNotice"><div id="localNotice" dir="ltr" lang="en"><p>-
</p>
<div class="page-warning">
<p><font size="4" color="red"><b>Login Required for Editting!</b></font>
</p><p>We are enforcing the rule that every user has to log in before 
he/she can make any modification to this wiki.  Your Cortina login 
should work fine here.  There is no real need to create a new account.  
If you do not want to log in, an anonymous user can only view some 
specific contents of this wiki.
</p>
</div>
</div></div>
	<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">G3 Build Environment</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From Cortina Systems Wiki</div>
		<div id="contentSub"></div>
		<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

		<!-- start content -->
<div id="mw-content-text" dir="ltr" class="mw-content-ltr" lang="en"><p>Go back to <a rel="nofollow" class="external text" href="http://sv-wiki-01/wiki/index.php/Platform-G3">G3 Platform SW</a>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2><span class="toctoggle">&nbsp;[<a href="#" class="internal" id="togglelink">hide</a>]&nbsp;</span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#G3_build_environment"><span class="tocnumber">1</span> <span class="toctext">G3 build environment</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#G3_PE.2FTaroko_MIPS_Toolchain"><span class="tocnumber">2</span> <span class="toctext">G3 PE/Taroko MIPS Toolchain</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#G3_A53_AP_Toolchain_-_Openwrt_version_for_bring_up"><span class="tocnumber">3</span> <span class="toctext">G3 A53 AP Toolchain - Openwrt version for bring up</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#G3_A53_AP_Toolchain-_Openembedded.2FYocto_2.0_Version"><span class="tocnumber">4</span> <span class="toctext">G3 A53 AP Toolchain- Openembedded/Yocto 2.0 Version</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#G3_A53_AP_Toolchain_-_Linaro_Bare_Metal_Version"><span class="tocnumber">5</span> <span class="toctext">G3 A53 AP Toolchain - Linaro Bare Metal Version</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#System_Requirement"><span class="tocnumber">6</span> <span class="toctext">System Requirement</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#How_to_build"><span class="tocnumber">7</span> <span class="toctext">How to build</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Kernel_Patches"><span class="tocnumber">8</span> <span class="toctext">Kernel Patches</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Build_Faster"><span class="tocnumber">9</span> <span class="toctext">Build Faster</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Build_in_Parallel"><span class="tocnumber">9.1</span> <span class="toctext">Build in Parallel</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Eliminate_Clone_Time"><span class="tocnumber">9.2</span> <span class="toctext">Eliminate Clone Time</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Eliminate_Download_Time"><span class="tocnumber">9.3</span> <span class="toctext">Eliminate Download Time</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#feeds"><span class="tocnumber">10</span> <span class="toctext">feeds</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Module_headers"><span class="tocnumber">11</span> <span class="toctext">Module headers</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="G3_build_environment">G3 build environment</span></h1>
<p>The build environment for G3 is DIFFERENT than G2's.  Both the 
Application Processor and the Packet Processor are difference. 
G3's Application Processor (AP) is a Quad Core ARM Cortex A53 which uses
 ARM v8 64 bit Instruction set.  G2's AP is Cortex A9 and uses ARM v7 32
 bit instruction set.
G3's Packet Engine (PE) is Dual Core Realtek Taroko which uses MIPS I 32
 bit instruction set with Realtek extensions. G2's PE is a Tensilica 
core and uses Tensilica instruction set. 
In addition, we will be moving from OpenWRT build environment to 
Yocto/OpenEmbedded build environment for G3.
</p>
<h1><span class="mw-headline" id="G3_PE.2FTaroko_MIPS_Toolchain">G3 PE/Taroko MIPS Toolchain</span></h1>
<ul>
<li> TBD
</li>
</ul>
<h1><span class="mw-headline" id="G3_A53_AP_Toolchain_-_Openwrt_version_for_bring_up">G3 A53 AP Toolchain - Openwrt version for bring up</span></h1>
<p>It is not ready completely. We create a g3-master branch for internal
 development. Its branch point is 
ab5bd67652b940c8da4229c64eb0cdf09caf4034 from master branch of upstream 
repository.  
</p><p>This environment is being deprecated and will not be used for production SDK release.
</p>
<h1><span class="mw-headline" id="G3_A53_AP_Toolchain-_Openembedded.2FYocto_2.0_Version">G3 A53 AP Toolchain- Openembedded/Yocto 2.0 Version</span></h1>
<p>The  production SDK will be based on this environment and Yocto provides its own toolchain. 
</p>
<h1><span class="mw-headline" id="G3_A53_AP_Toolchain_-_Linaro_Bare_Metal_Version">G3 A53 AP Toolchain - Linaro Bare Metal Version</span></h1>
<p>This Toolchain will be used for the ARM Trusted Firmware and UEFI Non-Trusted Bootloader.
It has been installed into /auto/project2/sw/toolchains/gcc-linaro-4.9-2014.11-x86_64_aarch64-elf/bin 
Please add it to your path. 
</p>
<h1><span class="mw-headline" id="System_Requirement">System Requirement</span></h1>
<p>On Debian 8, following packages are minimal requirement. It may be different with packages add/removal.
</p>
<pre>build-essential gawk git libncurses5-dev  libncursesw5-dev 
python subversion unzip wget zlib1g-dev libyaml-perl libssl-dev</pre>
<h1><span class="mw-headline" id="How_to_build">How to build</span></h1>
<p>The build procedure is similar with the original process. It does not
 have many packages in builds. It builds successfully without any kernel
 patches. Clone the openwrt repository from internal git server and 
configure it properly. Then make it.If you don't want to use external 
toolchain, just add toolchain=internal paramter when prepare.The 
external toolchain path is 
/auto/project2/sw/toolchains/openwrt-3.18.12_gcc-4.9-linaro_glibc-2.21.
</p><p>If have not yet cloned the linux kernel repo to your machine, you
 get it from gitolite@SVLSWG2REG2:sw/platforms/cs-unified/kernels/linux.
 
If you want the linux repo in /space/cortina/linux_repo (you can put it 
anywhere you like), just do
</p>
<pre>cd /space/cortina/
git clone gitolite@cs-local-gitmirror:sw/platforms/g2/kernels/linux linux-repo
</pre>
<pre>$ export CA_LOCAL_KERNEL_REPO=/space/cortina/linux_repo( Depend on real environment where the kernel repo is)
$ git clone gitolite@cs-local-gitmirror:sw/platforms/cs-unified/distro/openwrt/trunk/ca-openwrt
$ cd ca-openwrt
$ git checkout g3-master
$ make target=g3 board=fpga images=ramdisk profile=basic-4.4 LINUX_VERSION=4.4 prepare
$ make</pre>
<h1><span class="mw-headline" id="Kernel_Patches">Kernel Patches</span></h1>
<p>Openwrt introduces a new mechanism. It creates a git clone of the 
kernel in your build directory. With this feature, we don't generate 
Cortina kernel patch by hand. Developers could modify kernel codes, and 
commit/push modifications to server directly and conveniently. This 
option is set inside internal development. Developers set a environment,
 CA_LOCAL_KERNEL_REPO. It stands for the path of the local kernel 
repository in your machine. If such variable is set, git takes this 
repository as reference repository and fetches less difference from 
remote server. It minimizes network traffic, wait time, and CPU 
consumption.
</p><p>You have to clone a private linux kernel by yourself and set 
envrionment to tell openwrt where the repository is. For example, if you
 clone kernel repository in /space/jflee/linux_repo, then set 
CA_LOCAL_KERNEL_REPO. It may be different with others.
</p>
<pre>$ git clone gitolite@SVLSWG2REG2:sw/platforms/g2/kernels/linux linux-repo /space/jflee/linux_repo
$ export CA_LOCAL_KERNEL_REPO=/space/jflee/linux_repo  (bash)
$ setenv CA_LOCAL_KERNEL_REPO /space/jflee/linux_repo  (csh)</pre>
<p>The feature is based on the base that we don't use Openwrt's kernel 
patches. Platform team do our best to get rid of openwrt's kernel 
patches.
</p><p>The old mechanism, kernel patches, is existed. It is not set by 
default. The scenario is SDK release because customers don't access our 
git repository. The kernel patches is 
$(openwrt)/target/linux/CortinaAccess/patches-3.18.
</p>
<h1><span class="mw-headline" id="Build_Faster">Build Faster</span></h1>
<p>OpenWRT is a generic framework. Its design and usage is a build 
environment for different embedded systems. It's not a proprietary 
designed for Cortina-Access. It has overhead. And We have so many 
different purpose software applications on this environment. It spends 
much time on building those applications. How to build faster is a big 
issue to us. If build is faster, developers could spend much time on 
develop/implement/debug. If build is faster, they can go home early to 
eat dinner with family.
</p>
<h2><span class="mw-headline" id="Build_in_Parallel">Build in Parallel</span></h2>
<p>Make has one known feature. With -jN( N is a number) , it can build 
the whole world in parallel. As you know, ours machines are multi-cores 
mostly. If "-j" parameter lacks, Make uses only one CPU resource to 
build the whole world, the others are idle. Developers spend time on 
waiting. It's inefficient. Use "-j", the build time can be decreased 
amazingly and dramatically.
</p><p>The number of "-j" has different suggestions. For example, N is 
not exceed than CPU cores. Some suggest N is as twice as CPU cores, and 
some suggest N is CPU core plus 1. According to my experience, N is not 
exceed CPU number.
</p><p>Although the build time could be decreased, some shortcomings are.
</p>
<ul>
<li><p>CPU Resources Issue</p>
<p>Some machines are shared with developers, like hc-c-14 and sh-c-016. 
Many developers works on those machines. If one makes the world with "-j
 N", N is too big to impact others, the whole build process is slow. Be 
careful to use this function.</p></li>
<li><p>Build Dependency Issue</p>
<p>It's minor if it happens. This issue happens because of packages 
dependency. It's obvious and explicit. Once it happens,make dumps 
compile errors messages with "-j" and build world without "-j" 
successfully. Report this issue to platform team. Platform team figures 
out this miss dependency and help the owner to fix such issue.</p></li>
<li><p>Configuration Dependency Issue</p>
<p>You can treat this is another kind of dependency issue. This is 
implicit and difficult to know. Most open source applications use GNU 
autotools to generate proper configuration for different platform and 
architecture. For example, the build procedure of xz is run "configure" 
first, then make and make install. When "configure" command runs, it 
checks whether the library is existed, and others. This is the main 
problems. Some libraries are not <i>MUST</i> have. No matter libraries 
are existed or not, the applications could build successfully. Such 
libraries are existed if build in parallel , but non existed if build 
not in parallel. It means applications build successfully, but have 
different behaviour. It's hard to find out the different behaviour.</p></li></ul>
<p>However, make in parallel is a good way to build faster. Most of our tasks are kerenl spaces, it is not impacted.
</p>
<h2><span class="mw-headline" id="Eliminate_Clone_Time">Eliminate Clone Time</span></h2>
<p>Inside internal development, OpenWRT clones several repositories, 
like kernel and others, from git server. They are put in 
$(OPENWRT)/gitclones. If you move this directory to an independent place
 and create a soft-link to this place in next build, the clone time is 
eliminated.
</p>
<pre>$ mv openwrt.old/gitclones /anywhere/you/like
$ ln -s /anywhere/you/like openwrt.new/gitclones</pre>
<p>It has an known shortcoming. If you work on some task, you have committed some
modifications, but not push them yet. You have to switch context to other tasks
because some urgent issues. You clone a fresh openwrt environment on these
urgent issues. Something wrong. You find it is not a clean environment. It has
your modifications for other task. It is because these local repositories are shared.
Those modifications are existed in different openwrt environment for different tasks.
</p>
<h2><span class="mw-headline" id="Eliminate_Download_Time">Eliminate Download Time</span></h2>
<p>Download time is trivial because of cs-tarball-server. The cs-tarball
 server is a web server to help download all required tarball instead of
 internet. If you want save this trivial time, you can reference the 
following procedure.
</p>
<pre>$ mv openwrt.old/dl /anywhere/you/like
$ ln -s /anywhere/you/like openwrt.new/dl</pre>
<h1><span class="mw-headline" id="feeds">feeds</span></h1>
<p>In OpenWrt, a "feed" is a collection of packages which share a common
 location. Currently, it has two feed. One is "packages", and the other 
is "new_packages". Both are from openwrt. Openwrt team starts a new 
offical feed which is located in GitHub. The new_packages comes from 
this. The packages is the old feed. Not all packages are moved to new 
offical feed. For example, tcl. We may need some packages comes from 
"new_packages", and some comes from "packages".
</p><p>Some feeds for Cortina Access maintained. One is ca-packages, and
 the other is ca-open-packages Those are for packages which are not 
maintained by community. Based to g2's experience, divide the single 
repository into 3 repositories.
</p>
<ol>
<li><p>It has too many packages' recipe in one repository.</p>
<p>It is hard to classify. We are going to have 3 repositories for different purpose.</p>
<ul>
<li>ca-packages&nbsp;: Those packages are implemented by Cortina Access.</li>
<li>ca-open-packages&nbsp;: Those open-source packages which are included in those feed repository maintained by community.</li>
<li>ca-3rd-packages&nbsp;: packages which provides by 3rd parties. For 
example, Paragon NTFS drivers, wifi drivers, and etc. It is not 
necessary for now. TBD.</li></ul>
</li>
<li><p>Flat directory.</p>
<p>We put many packages in a flat directory. It is easy to find by eyes when #packages is small. Over time, it becomes a problem.</p></li></ol>
<h1><span class="mw-headline" id="Module_headers">Module headers</span></h1>
<p>Several kernel modules are inside system. When it compiles, it many 
need others header files. User space applications copied there header 
files to $(STAGING_DIR)/usr/include. STAGING_DIR is a variable. It is 
$(openwrt)/staging_dir/target-aarch64-openwrt-linux-gnu in G3.
</p><p>For example, openssl copies header files to 
$(staging_dir)/usr/include. Other packages needs such header files. Just
 add $(staging_dir)/usr/include in header file search path.
</p><p>For kernel modules, it is uncommon to share header files to other
 modules. We define a common place, 
$(STAGING_DIR)/usr/src/modules-headers, for this purpose. For example, 
ca-osal copies header to $(STAGING_DIR)/usr/src/modules-headers/ca-osal.
</p>
<!-- 
NewPP limit report
CPU time usage: 0.026 seconds
Real time usage: 0.027 seconds
Preprocessor visited node count: 100/1000000
Preprocessor generated node count: 160/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->
</div><div class="printfooter">
Retrieved from "<a href="http://sv-wiki-01/wiki/index.php?title=G3_Build_Environment&amp;oldid=102002">http://sv-wiki-01/wiki/index.php?title=G3_Build_Environment&amp;oldid=102002</a>"</div>
		<div id="catlinks" class="catlinks catlinks-allhidden"></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
</div></div>
<div id="column-one">
	<h2>Navigation menu</h2>
	<div id="p-cactions" class="portlet" role="navigation">
		<h3>Views</h3>
		<div class="pBody">
			<ul>
				<li id="ca-nstab-main" class="selected"><a href="http://sv-wiki-01/wiki/index.php/G3_Build_Environment" title="View the content page [alt-shift-c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="http://sv-wiki-01/wiki/index.php?title=Talk:G3_Build_Environment&amp;action=edit&amp;redlink=1" title="Discussion about the content page [alt-shift-t]" accesskey="t">Discussion</a></li>
				<li id="ca-viewsource"><a href="http://sv-wiki-01/wiki/index.php?title=G3_Build_Environment&amp;action=edit" title="This page is protected.
You can view its source [alt-shift-e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="http://sv-wiki-01/wiki/index.php?title=G3_Build_Environment&amp;action=history" rel="archives" title="Past revisions of this page [alt-shift-h]" accesskey="h">History</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal" role="navigation">
		<h3>Personal tools</h3>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="http://sv-wiki-01/wiki/index.php?title=Special:UserLogin&amp;returnto=G3+Build+Environment" title="You are encouraged to log in; however, it is not mandatory [alt-shift-o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo" role="banner">
<a href="http://sv-wiki-01/wiki/index.php/Main_Page" style="background-image: url(/wiki/cortina/images/logo.png);" title="Visit the main page"></a>
	</div>
	<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class="pBody">
			<ul>
				<li id="n-Top-Page"><a href="http://sv-wiki-01/wiki/index.php/Main_Page">Top Page</a></li>
				<li id="n-Software-Home-Page"><a href="http://sv-wiki-01/wiki/index.php/DH_%26_ACC_Software_Home_Page">Software Home Page</a></li>
				<li id="n-DHBU-Software-Wiki"><a href="http://sv-wiki-01/wiki/index.php/Digital_Home_Software_Home_Page">DHBU Software Wiki</a></li>
				<li id="n-Lynx-Software"><a href="http://sv-wiki-01/wiki/index.php/Lynx_Software_Home_Page">Lynx Software</a></li>
				<li id="n-DHBU-Hardware-Wiki"><a href="http://sv-wiki-01/wiki/index.php/Digital_Home_Hardware_Home_Page">DHBU Hardware Wiki</a></li>
				<li id="n-portal"><a href="http://sv-wiki-01/wiki/index.php/Cortina_Systems_Wiki:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="http://sv-wiki-01/wiki/index.php/Cortina_Systems_Wiki:Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="http://sv-wiki-01/wiki/index.php/Special:RecentChanges" title="A list of recent changes in the wiki [alt-shift-r]" accesskey="r">Recent changes</a></li>
				<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" rel="nofollow" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div class="generated-sidebar portlet" id="p-categorytree-portlet" role="navigation">
		<h3>Categories</h3>
		<div class="pBody">
<div class="CategoryTreeTag" data-ct-mode="0" data-ct-options="{&quot;mode&quot;:0,&quot;hideprefix&quot;:20,&quot;showcount&quot;:false,&quot;namespaces&quot;:false}"><div class="CategoryTreeSection"><div class="CategoryTreeItem"><span class="CategoryTreeBullet"><span class="CategoryTreeToggle" style="display: inline;" data-ct-title="Admin" title="expand" data-ct-state="collapsed">►</span> </span> <a class="CategoryTreeLabel  CategoryTreeLabelNs14 CategoryTreeLabelCategory" href="http://sv-wiki-01/wiki/index.php/Category:Admin">Admin</a></div>
		<div class="CategoryTreeChildren" style="display:none"></div></div>
		
		<div class="CategoryTreeSection"><div class="CategoryTreeItem"><span class="CategoryTreeBullet"><span class="CategoryTreeToggle" style="display: inline;" data-ct-title="Documentation" title="expand" data-ct-state="collapsed">►</span> </span> <a class="CategoryTreeLabel  CategoryTreeLabelNs14 CategoryTreeLabelCategory" href="http://sv-wiki-01/wiki/index.php/Category:Documentation">Documentation</a></div>
		<div class="CategoryTreeChildren" style="display:none"></div></div>
		
		<div class="CategoryTreeSection"><div class="CategoryTreeItem"><span class="CategoryTreeEmptyBullet">► </span> <a class="CategoryTreeLabel  CategoryTreeLabelNs14 CategoryTreeLabelCategory" href="http://sv-wiki-01/wiki/index.php/Category:Helpdesk_Service">Helpdesk Service</a></div>
		<div class="CategoryTreeChildren" style="display:none"></div></div>
		
		<div class="CategoryTreeSection"><div class="CategoryTreeItem"><span class="CategoryTreeBullet"><span class="CategoryTreeToggle" style="display: inline;" data-ct-title="Prodeng" title="expand" data-ct-state="collapsed">►</span> </span> <a class="CategoryTreeLabel  CategoryTreeLabelNs14 CategoryTreeLabelCategory" href="http://sv-wiki-01/wiki/index.php/Category:Prodeng">Prodeng</a></div>
		<div class="CategoryTreeChildren" style="display:none"></div></div>
		
		<div class="CategoryTreeSection"><div class="CategoryTreeItem"><span class="CategoryTreeEmptyBullet">► </span> <a class="CategoryTreeLabel  CategoryTreeLabelNs14 CategoryTreeLabelCategory" href="http://sv-wiki-01/wiki/index.php/Category:QA_Eng">QA Eng</a></div>
		<div class="CategoryTreeChildren" style="display:none"></div></div>
		
		</div>
				</div>
	</div>
	<div id="p-search" class="portlet" role="search">
		<h3><label for="searchInput">Search</label></h3>
		<div id="searchBody" class="pBody">
			<form action="/wiki/index.php" id="searchform">
				<input type="hidden" name="title" value="Special:Search">
				<input type="search" name="search" placeholder="Search" title="Search Cortina Systems Wiki [alt-shift-f]" accesskey="f" id="searchInput" autocomplete="off">
				<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton">&nbsp;
				<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton">
			</form>
		</div>
	</div>
	<div class="portlet" id="p-tb" role="navigation">
		<h3>Tools</h3>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="http://sv-wiki-01/wiki/index.php/Special:WhatLinksHere/G3_Build_Environment" title="A list of all wiki pages that link here [alt-shift-j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="http://sv-wiki-01/wiki/index.php/Special:RecentChangesLinked/G3_Build_Environment" title="Recent changes in pages linked from this page [alt-shift-k]" accesskey="k">Related changes</a></li>
				<li id="t-specialpages"><a href="http://sv-wiki-01/wiki/index.php/Special:SpecialPages" title="A list of all special pages [alt-shift-q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="http://sv-wiki-01/wiki/index.php?title=G3_Build_Environment&amp;printable=yes" rel="alternate" title="Printable version of this page [alt-shift-p]" accesskey="p">Printable version</a></li>
				<li id="t-permalink"><a href="http://sv-wiki-01/wiki/index.php?title=G3_Build_Environment&amp;oldid=102002" title="Permanent link to this revision of the page">Permanent link</a></li>
				<li id="t-info"><a href="http://sv-wiki-01/wiki/index.php?title=G3_Build_Environment&amp;action=info">Page information</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
<div id="footer" role="contentinfo">
	<div id="f-poweredbyico">
		<a href="http://www.mediawiki.org/"><img src="G3%20Build%20Environment%20-%20Cortina%20Systems%20Wiki_files/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31"></a>
	</div>
	<ul id="f-list">
		<li id="lastmod"> This page was last modified on 20 March 2017, at 09:35.</li>
		<li id="viewcount">This page has been accessed 776 times.</li>
		<li id="privacy"><a href="http://sv-wiki-01/wiki/index.php/Cortina_Systems_Wiki:Privacy_policy" title="Cortina Systems Wiki:Privacy policy">Privacy policy</a></li>
		<li id="about"><a href="http://sv-wiki-01/wiki/index.php/Cortina_Systems_Wiki:About" title="Cortina Systems Wiki:About">About Cortina Systems Wiki</a></li>
		<li id="disclaimer"><a href="http://sv-wiki-01/wiki/index.php/Cortina_Systems_Wiki:General_disclaimer" title="Cortina Systems Wiki:General disclaimer">Disclaimers</a></li>
	</ul>
</div>
</div>
<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["ext.categoryTree","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.269 secs. --><div style="display: none; font-size: 11.4667px;" class="suggestions"><div class="suggestions-results"></div><div class="suggestions-special"></div></div></body></html>